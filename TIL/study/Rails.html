<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Ruby on Rails | JS Blog</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="JeongShin 의 코딩 블로그 👨🏻‍💻">
    <meta name="google-site-verification" content="66JKoxw93huqhAdXO3P0K86NJZne5H-M3302YHcwoWI">
    <link rel="preload" href="/JeongShin_Blog/assets/css/0.styles.afe9eff5.css" as="style"><link rel="preload" href="/JeongShin_Blog/assets/js/app.76117f30.js" as="script"><link rel="preload" href="/JeongShin_Blog/assets/js/2.41e2da69.js" as="script"><link rel="preload" href="/JeongShin_Blog/assets/js/12.659c6816.js" as="script"><link rel="prefetch" href="/JeongShin_Blog/assets/js/10.ddadd6df.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/11.3eb4da11.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/13.05612f65.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/14.f974b8a8.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/15.a648fbb8.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/16.404b5199.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/17.ce0801ce.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/18.06344834.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/19.757ace8f.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/20.e78c49c2.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/21.e20f53b7.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/22.f5a10a09.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/23.b34c64e9.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/24.93bd3c3b.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/25.c029ef22.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/26.39a10f80.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/27.e9f3ac63.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/28.92fcc87f.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/29.075715ae.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/3.485be4ad.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/30.e0aaba8e.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/4.e01fa151.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/5.8d47bb6d.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/6.747baa0e.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/7.b6b6fc4c.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/8.5d012044.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/9.3fd16347.js">
    <link rel="stylesheet" href="/JeongShin_Blog/assets/css/0.styles.afe9eff5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/JeongShin_Blog/" class="home-link router-link-active"><img src="/JeongShin_Blog/images/logo.jpg" alt="JS Blog" class="logo"> <span class="site-name can-hide">JS Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/JeongShin_Blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/JeongShin_Blog/home/" class="nav-link">
  
</a></div><div class="nav-item"><a href="/JeongShin_Blog/aboutme/" class="nav-link">
  About me
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/JeongShin_Blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/JeongShin_Blog/home/" class="nav-link">
  
</a></div><div class="nav-item"><a href="/JeongShin_Blog/aboutme/" class="nav-link">
  About me
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/JeongShin_Blog/guide/" class="sidebar-link">Guide</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/JeongShin_Blog/TIL/" class="sidebar-heading clickable router-link-active open"><span>Today I Learned</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/JeongShin_Blog/TIL/study/" aria-current="page" class="sidebar-link">WEB Basics</a></li><li><a href="/JeongShin_Blog/TIL/study/JavaScript.html" class="sidebar-link">Vanilla JavaScript</a></li><li><a href="/JeongShin_Blog/TIL/study/NodeJS.html" class="sidebar-link">Node JS</a></li><li><a href="/JeongShin_Blog/TIL/study/Rails.html" aria-current="page" class="active sidebar-link">Ruby on Rails</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JeongShin_Blog/TIL/study/Rails.html#rails-overview" class="sidebar-link">Rails Overview</a></li><li class="sidebar-sub-header"><a href="/JeongShin_Blog/TIL/study/Rails.html#rails-components" class="sidebar-link">Rails Components</a></li><li class="sidebar-sub-header"><a href="/JeongShin_Blog/TIL/study/Rails.html#active-record-migration" class="sidebar-link">Active Record Migration</a></li><li class="sidebar-sub-header"><a href="/JeongShin_Blog/TIL/study/Rails.html#scaffold" class="sidebar-link">Scaffold</a></li></ul></li><li><a href="/JeongShin_Blog/TIL/study/db.html" class="sidebar-link">Database</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/JeongShin_Blog/algorithms/" class="sidebar-heading clickable"><span>Algorithms</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/JeongShin_Blog/book-review/" class="sidebar-heading clickable"><span>Book-Review</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/JeongShin_Blog/daily/" class="sidebar-heading clickable"><span>Daily</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ruby-on-rails"><a href="#ruby-on-rails" class="header-anchor">#</a> Ruby on Rails <img src="https://img.icons8.com/color/48/000000/ruby-programming-language.png"></h1> <p>이 문서는 공식 <a href="https://rubykr.github.io/rails_guides/getting_started.html" target="_blank" rel="noopener noreferrer">레일즈 가이드<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>를 참고하여 만들었습니다.</p> <p>Rails는 Ruby 언어로 작성된 웹, 앱 어플리케이션 프레임워크이다.</p> <h2 id="rails-overview"><a href="#rails-overview" class="header-anchor">#</a> Rails Overview</h2> <p>Ruby on Rails 의 특징 3가지를 알아보자.</p> <ol><li><code>MVC Architecture</code></li></ol> <p>Model, View, Controller 를 분리하여 설계하는 아키텍쳐.</p> <div class="custom-block tip"><p class="custom-block-title">Rails 에서의 MVC</p> <p>레일즈에서 모델은 주로 데이터 베이스 테이블과 상호 작용하는 규칙들을 관리한다.</p> <p>대부분의 경우에 데이터베이스 하나의 테이블은 어플리케이션의 하나의 모들과 대응한다.</p></div> <ol start="2"><li><code>Convention Over Configuartion</code> 👉 설정 보다 관습</li></ol> <p>미리 환경을 구축하여 개발자가 세팅하는데 시간을 사용하지 않고 바로 개발, 코딩에 들어가도록 돕는다.</p> <ol start="3"><li><code>DRY</code> 👉 Don't Repeat Yourself</li></ol> <p>Software적 철학으로 aviod redundancy. 정규화를 통하여 최소한의 것들로 최대한의 것을 만든다.</p> <h2 id="rails-components"><a href="#rails-components" class="header-anchor">#</a> Rails Components</h2> <p><code>Gem</code> 이란?</p> <p>Rails 에서 사용하는 라이브러리를 의미한다. node 에서 사용하는 npm과 유사한 개념이다.</p> <p>Rails 는 다음과 같은 개발 컴포넌트를 제공한다.</p> <ul><li>Action Pack 👉 MVC 에서 VC에 해당하는 부분
<ul><li>Action Controller 👉 Request를 처리하고 파라미터 추출한 뒤 의도된 액션으로 forward 한다. 액션 컨트롤러는 session 관리, template rendering, redirect 관리 서비스를 포함한다.</li> <li>Action Dispatch 👉 Request 를 원하는 곳으로 연결</li> <li>Action View 👉 HTML, XML을 만든다. 템풀릿 렌더링, Nested, Partial 템플릿, AJAX 지원을 관리한다.</li></ul></li> <li>Action Mailer 👉 내장 이메일 서비스 프레임워크</li> <li>Active Model 👉액션 팩 서비스와 ORM Gem 과 인터페이스 정의.</li> <li>Active Record 👉 레일즈 앱 모델의 기초. 데이터베이스 추상화와 기본 CRUD 기능 고급 검색 능력과 객체들 간의 관계를 정의하는 기능을 제공.</li> <li>Active Resource 👉 비즈니스 객체와 RESTful 웹 서비스간의 연결을 위한 프레임 워크. 웹 기반의 자원을 로컬 객체의 CRUD 처럼 매핑.</li> <li>Active Support 👉 레일즈가 사용하는 유틸리티 클래스와 표준 루비 확장 모음</li> <li>Railites 👉 다양한 프레임워크와 플러그인을 이어주는 레일즈 핵심 코드</li></ul> <h2 id="active-record-migration"><a href="#active-record-migration" class="header-anchor">#</a> Active Record Migration</h2> <h3 id="rails-database-특징"><a href="#rails-database-특징" class="header-anchor">#</a> Rails Database 특징</h3> <p>레일즈에선 기본적으로 SQLite3 를 내장하여 개발 &amp; 테스트 환경에서 사용하고 나중에 config/database.yml에서 설정을 바꿀 수 있다.</p> <p>MySQL 데이터 베이스 혹은 PostgreSQL 을 설정할 수 있다.</p> <p>마이그레이션은 데이터베이스를 루비를 이용해서 데이터베이스에 대한 변경을 적용하기 위한 편리한 방법이다.</p> <p>따라서 개발자는 SQL을 손수 수정하고 다른 개발자에게 수정 사항을 알려줘야할 책임을 가진다.</p> <p><strong>Active Records</strong> 는 이미 실행된 마이그레이션을 추적한다. 따라서 개발자는 소스를 업데이트하고</p> <div class="language- extra-class"><pre><code>rake db:migrate
</code></pre></div><p>명령을 실행만 하면된다. 자동으로 db/schema.rb 파일이 갱신된다.</p> <p>마이그레이션은 <strong>데이터베이스에 독립적</strong>이다. 따라서 개발에서 SQLite3 를 사용하고 제품에서는 MySQL 을 사용할 수 있다.</p> <h3 id="migration-overview"><a href="#migration-overview" class="header-anchor">#</a> Migration Overview</h3> <h4 id="마이그레이션은-클래스이다"><a href="#마이그레이션은-클래스이다" class="header-anchor">#</a> 마이그레이션은 클래스이다</h4> <p>마이그레이션은 up (필요한 변경 사항 수행) 과 down (변경 사항 되돌리기) 를 구현한 ActiveRecord::Migration의 서브 클래스이다.</p> <p>액티브 레코드는 데이터베이스에 독립적이게 일반 데이터 정의 태스크를 수행하는 메소드를 제공하는데 아래와 같다.</p> <ul><li>create_table</li> <li>change_table</li> <li>drop_table</li> <li>add_column</li> <li>change_column</li> <li>rename_column</li> <li>remove_column</li> <li>add_index</li> <li>remove_index</li></ul> <h4 id="마이그레이션-이름의-의미"><a href="#마이그레이션-이름의-의미" class="header-anchor">#</a> 마이그레이션 이름의 의미</h4> <p>마이그레이션은 각 클래스당 하나의 파일로 db/migrate에 저장된다. 파일 이름은</p> <p><em>타임스탬프 마이그레이션 식별자_마이그레이션 이름</em></p> <p>ex) YYYYMMDDHHMMSS_create_products.rb</p> <p>의 형식으로 구성된다.</p> <p>이때 반드시 <strong>같은 이름을 가진 클래스를 정의</strong> 해야한다 (CamelCase 형식 사용). 위의 경우 CreateProducts 클래스가 반드시 있어야 적상적으로 클래스를 찾을 수 있다.</p> <h4 id="마이그레이션-변경하기"><a href="#마이그레이션-변경하기" class="header-anchor">#</a> 마이그레이션 변경하기</h4> <p>마이그레이션을 작성하다 문제점이 발견되면 이미 실행된 마이그레이션의 경우 단순히 마이그레이션을 수정하고 다시 실행하는 것만으로 원하는 변경을 반영할 수 없다.</p> <p>따라서 롤백을 (rake db:rollback) 하고 다시 마이그레이션을 수정한 뒤 정확한 버전에 대하여 rake db:migrate를 실행해야 한다.</p> <h2 id="scaffold"><a href="#scaffold" class="header-anchor">#</a> Scaffold</h2> <p>Scaffold (발판) 방식은 CRUD에 판한 빠른 구현을 제공 해주지만 불필요한 요소가 포함되어 있을 수 있다.</p> <p>Scaffold 방식을 이용하여 간단한 앱을 구현해보자.</p> <h3 id="rails-프로젝트-생성"><a href="#rails-프로젝트-생성" class="header-anchor">#</a> Rails 프로젝트 생성</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>rails new <span class="token operator">&lt;</span>Project_name<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>의 명령어로 프로젝트를 만든다.</p> <p>그리고</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>rails server
<span class="token comment">#혹은</span>
rails s
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>명령어로 서버를 동작할 수 있다. 루비로 웹서버는 느리다는 단점이 있다.</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 다음과 같이 명령어를 수행 하였다</span>
<span class="token comment"># tips : rails g scaffold &lt;DB TABLE NAME&gt; &lt;attributes&gt;</span>
$ rails g scaffold Project title:string description:text percent_complete:decimal
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>위의 명령어로 데이터베이스에 대한 설계를 해주고 migration 을 진행 해준다.</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>rake db:migrate
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>여기서 <code>rake db</code> 명령어에 대하여 알아보자.</p> <ul><li>rake db:schema:load 👉 새로운 테이블을 생성한다.</li> <li>rake db:reset 👉 데이터 베이스를 초기화 한다. (db:drop + db:create + db:migrate 를 수행한다 생각하면 됨)</li> <li>rake db:migrate 👉 아직 수행되지 않은 하나의 migration을 진행한다. 스키마에 변경이 있을때 migration을 수행한다.</li> <li>rake db:create 👉 데이터 베이스 생성한다.</li> <li>rake db:drop 👉 데이터 베이스를 삭제한다.</li> <li>rake db:setup 👉 db:create, db:schema:load, db:seed 를 수행한다</li></ul> <h3 id="font-추가하기"><a href="#font-추가하기" class="header-anchor">#</a> Font 추가하기</h3> <p>폰트를 프로젝트 내부에 저장해두는 것이 구글 폰트 등 사용할 때 서버가 다운되거나 등의 이유에 있어 제대로 로딩되지 않을껄 대비하여 유리하다.</p> <p>먼저 app/assets/ 디렉토리에 fonts 라는 폴더를 새로 만들어 준 뒤 다운받은 폰트를 저장한다.</p> <p>그리고 나서 config/ 디렉토리로 이동하여 applcation.rb 파일에 아래의 내용을 추가 해준다.</p> <div class="language-rb line-numbers-mode"><pre class="language-rb"><code>config<span class="token punctuation">.</span>assets<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">true</span>
config<span class="token punctuation">.</span>assets<span class="token punctuation">.</span>paths <span class="token operator">&lt;</span><span class="token operator">&lt;</span> <span class="token constant">Rails</span><span class="token punctuation">.</span>root<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token string">'/app/assets/fonts'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>기본적인 assets 파일 구조에 새로운 파일 fonts 를 config 에 정상적으로 추가되도록 paths 배열에 추가하기 위함이다.</p> <h3 id="controller-살펴보기"><a href="#controller-살펴보기" class="header-anchor">#</a> Controller 살펴보기</h3> <div class="language-rb line-numbers-mode"><pre class="language-rb"><code><span class="token keyword">class</span> <span class="token class-name">ProjectsController</span> <span class="token operator">&lt;</span> <span class="token constant">ApplicationController</span>
  before_action <span class="token symbol">:set_project</span><span class="token punctuation">,</span> only<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token symbol">:show</span><span class="token punctuation">,</span> <span class="token symbol">:edit</span><span class="token punctuation">,</span> <span class="token symbol">:update</span><span class="token punctuation">,</span> <span class="token symbol">:destroy</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>일단 1행부터 살퍄보면 ProjectsController는 ApplicationController 를 상속 받는다.</p> <p>before_cation은 only 뒤에 오는 배열에 속한 메서드 마다 set_project를 실행하게 한다.</p> <div class="language-rb line-numbers-mode"><pre class="language-rb"><code><span class="token keyword">def</span> <span class="token method-definition"><span class="token function">show</span></span>
<span class="token keyword">end</span>

<span class="token keyword">private</span>
<span class="token comment"># Use callbacks to share common setup or constraints between actions.</span>
<span class="token keyword">def</span> <span class="token method-definition"><span class="token function">set_project</span></span>
    <span class="token variable">@project</span> <span class="token operator">=</span> <span class="token constant">Project</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span>params<span class="token punctuation">[</span><span class="token symbol">:id</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>즉 show 메서드가 실행될 때마다 set_project를 먼저 실행하고 다음으로 show 메서드를 수행하게 된다.</p> <p>여기서 루비 온 레일즈의 3번째 철학인 DRY를 엿볼 수 있다.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/JeongShin_Blog/TIL/study/NodeJS.html" class="prev">
        Node JS
      </a></span> <span class="next"><a href="/JeongShin_Blog/TIL/study/db.html">
        Database
      </a>
      →
    </span></p></div>  <div><div id="comment"></div></div></main> <footer class="siteFooter">
  COPYRIGHT©2020 ALL RIGHT JeongShin
  <br>sjeong1127@gmail.com . +82-10-2169-2142 .
  <br> <a href="https://www.instagram.com/jeongshin96/" target="_blank">Instagram</a> <a href="https://github.com/JeongShin" target="_blank">GitHub</a></footer></div><div class="global-ui"></div></div>
    <script src="/JeongShin_Blog/assets/js/app.76117f30.js" defer></script><script src="/JeongShin_Blog/assets/js/2.41e2da69.js" defer></script><script src="/JeongShin_Blog/assets/js/12.659c6816.js" defer></script>
  </body>
</html>
