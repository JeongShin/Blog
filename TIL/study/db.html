<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>데이터베이스 | JS Blog</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="JeongShin 의 코딩 블로그 👨🏻‍💻">
    <meta name="google-site-verification" content="66JKoxw93huqhAdXO3P0K86NJZne5H-M3302YHcwoWI">
    <link rel="preload" href="/JeongShin_Blog/assets/css/0.styles.a7461271.css" as="style"><link rel="preload" href="/JeongShin_Blog/assets/js/app.b665e261.js" as="script"><link rel="preload" href="/JeongShin_Blog/assets/js/2.b04f9bcd.js" as="script"><link rel="preload" href="/JeongShin_Blog/assets/js/16.9cfdb0f1.js" as="script"><link rel="prefetch" href="/JeongShin_Blog/assets/js/10.533abc0e.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/11.8adc08c9.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/12.fb8f33a9.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/13.bf112f52.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/14.77b0fa75.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/15.794bb6c6.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/17.8b33c953.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/18.c5a87dfc.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/19.ba03b0e2.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/20.6f589bff.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/21.18f71790.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/22.8bc1f2e8.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/23.c2317134.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/24.33f1273c.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/25.b977e3db.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/26.5942368e.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/27.e508cd0d.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/28.bd48bbb6.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/29.110364b5.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/3.280d91f8.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/4.8b294d63.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/5.5eed06b6.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/6.9a3c281a.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/7.5c3a75de.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/8.dc3ad213.js"><link rel="prefetch" href="/JeongShin_Blog/assets/js/9.c657e5f9.js">
    <link rel="stylesheet" href="/JeongShin_Blog/assets/css/0.styles.a7461271.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/JeongShin_Blog/" class="home-link router-link-active"><img src="/JeongShin_Blog/images/logo.jpg" alt="JS Blog" class="logo"> <span class="site-name can-hide">JS Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/JeongShin_Blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/JeongShin_Blog/home/" class="nav-link">
  
</a></div><div class="nav-item"><a href="/JeongShin_Blog/aboutme/" class="nav-link">
  About me
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/JeongShin_Blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/JeongShin_Blog/home/" class="nav-link">
  
</a></div><div class="nav-item"><a href="/JeongShin_Blog/aboutme/" class="nav-link">
  About me
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/JeongShin_Blog/guide/" class="sidebar-link">Guide</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/JeongShin_Blog/TIL/" class="sidebar-heading clickable router-link-active open"><span>Today I Learned</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/JeongShin_Blog/TIL/study/" aria-current="page" class="sidebar-link">WEB Basics</a></li><li><a href="/JeongShin_Blog/TIL/study/JavaScript.html" class="sidebar-link">Vanilla JavaScript</a></li><li><a href="/JeongShin_Blog/TIL/study/NodeJS.html" class="sidebar-link">Vanilla JavaScript II</a></li><li><a href="/JeongShin_Blog/TIL/study/Rails.html" class="sidebar-link">Rails Study Notes</a></li><li><a href="/JeongShin_Blog/TIL/study/db.html" aria-current="page" class="active sidebar-link">데이터베이스</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JeongShin_Blog/TIL/study/db.html#데이터베이스-기초" class="sidebar-link">데이터베이스 기초</a></li><li class="sidebar-sub-header"><a href="/JeongShin_Blog/TIL/study/db.html#트랜잭션" class="sidebar-link">트랜잭션</a></li><li class="sidebar-sub-header"><a href="/JeongShin_Blog/TIL/study/db.html#무결성-제약-조건" class="sidebar-link">무결성 제약 조건</a></li><li class="sidebar-sub-header"><a href="/JeongShin_Blog/TIL/study/db.html#정규화" class="sidebar-link">정규화</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/JeongShin_Blog/algorithms/" class="sidebar-heading clickable"><span>Algorithms</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/JeongShin_Blog/book-review/" class="sidebar-heading clickable"><span>Book-Review</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/JeongShin_Blog/daily/" class="sidebar-heading clickable"><span>Daily</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="데이터베이스"><a href="#데이터베이스" class="header-anchor">#</a> 데이터베이스</h1> <h2 id="데이터베이스-기초"><a href="#데이터베이스-기초" class="header-anchor">#</a> 데이터베이스 기초</h2> <h3 id="데이터-모델-분류"><a href="#데이터-모델-분류" class="header-anchor">#</a> 데이터 모델 분류</h3> <ul><li>관계형 데이터 모델</li></ul> <p>관계형 데이터 모델은 테이블(릴레이션)의 형식으로 표현하는 확실한 이론적 기반과 간결한 표현형식으로 <strong>가장 많은 상용 DBMS가 사용</strong>한다.</p> <ul><li>객체지향 데이터 모델</li></ul> <p>데이터 구조가 복잡하여 관계형 모델이 부적당한 경우 데이터를 클래스 단위로 표현하여 상속, 캡슐화 등의 객체 지향 개념을상도입하고 있다.</p> <ul><li>계층형 데이터 모델</li></ul> <p>데이터를 트리 구조로 표현하며 각 노드가 레코드가 된다.</p> <ul><li>네트워크 데이터 모델</li></ul> <p>계층형을 보완한 모델로 트리가 아닌 그래프 형태로 표현한다.</p> <h3 id="스키마와-인스턴스"><a href="#스키마와-인스턴스" class="header-anchor">#</a> 스키마와 인스턴스</h3> <p><code>스키마</code></p> <p>👉 메타 데이터와 같은 의미로 데이터 베이스의 구조에 대한 정보를 의미한다. 대부분 데이터베이스 설계과정에서 정의되며 자주 변경되지 않는 특징을 가진다.</p> <p>👉 스키마는 데이터 항목, 데이터 타입과 같은 구조와 데이터가 만족해야할 제약 조건까지 포함한다.</p> <p><code>인스턴스</code></p> <p>👉 스키마에 대한 실제 데이터를 인스턴스라 한다.</p> <h3 id="스키마-아키텍처"><a href="#스키마-아키텍처" class="header-anchor">#</a> 스키마 아키텍처</h3> <ol><li>논리적 단계 : 논리적 스키마</li></ol> <p>논리적 단계에서는 전체 데이터 베이스의 논리적 구조를 기술한다. 논리적 스키마는 논리적 데이터 모델을 사용하며 관계형 모델의 경우에는 데이터베이스 테이블들의 집합 및 제약조건들로 표현된다.</p> <ol start="2"><li>내부 단계 : 내부 스키마</li></ol> <p>내부 단계에서는 데이터베이스의 물리적 구조를 기술한다. 데이터 저장 구조의 세부 사항과 데이터 접근 경로들을 기술한다.</p> <ol start="3"><li>외부 단계 : 외부 스키마</li></ol> <p>사용자 뷰에 해당한다. 사용자가 관심을 갖는 데이터베이스의 부분을 기술하고 나머지는 숨긴다.</p> <h3 id="데이터의-독립성"><a href="#데이터의-독립성" class="header-anchor">#</a> 데이터의 독립성</h3> <p>3 단계 스키마 아키텍처를 통해 상위 스키마와 하위 스키마가 매핑을 통해 <strong>데이터의 독립성</strong>을 제공할 수 있다.</p> <p><code>물리적 데이터 독립성</code></p> <p>논리적 스키마 또는 외부 스키마의 정의를 변경할 필요 없이 물리적 스키마를 수정할 수 있는 능력을 의미한다.</p> <p>예를들어, 학사 DB에서 전공 별 학생들에 대한 데이터 검색이 빈번한 경우, 학생 테이블을 전공에 대해 정렬한든지 인덱스를 추가하여 논리적 스키마를 변경하지 않아도 성능을 향상시킬 수 있다.</p> <p><code>논리적 데이터 독립성</code></p> <p>외부 스키마의 정의를 변경할 필요 없이 논리적 스키마를 수정 할 수 있는 능력.</p> <p>예를들어 학생 테이블의 경우 새로운 응용 프로그램의 개발을 위해 학년을 나타내는 속성을 추가한다고 기존 응용 프로그램은 수정할 필요가 없다.</p> <p><code>데이터 추상화</code></p> <p>응용 프로그램에서는 데이터의 물리적 구조나 상세한 내용은 알 필요가 없음. 따라서 추상화를 통해 필요한 데이터만 제공.</p> <h2 id="트랜잭션"><a href="#트랜잭션" class="header-anchor">#</a> 트랜잭션</h2> <p>데이터베이스 시스템은 다수의 사용자에 대해서도 데이터에 대한 동시적 접근 상황에서 항상 데이터의 알관성이 유지되어야 하며 혹시나 발생하는 시스템 장애에도 데이터의 손실이 없어야 한다.</p> <p>정의 👉 일련의 데이터베이스 연산들로 이루어진 논리적인 연산 단위</p> <div class="custom-block tip"><p class="custom-block-title">트랜잭션의 ACID 특징</p> <p>A - Atomicity</p> <p>All or Nothing, 즉, 모든 연산이 완전히 수행되든지 전혀 수행되지 않아야 한다.</p> <p>C - Consistency</p> <p>완료한 트랜잭션은 시스템 장애 발생 시에도 그 효과가 지속적이어야 함</p> <p>I - Isolation</p> <p>트랙잭션의 효과가 다른 트랜잭션의 영향으로부터 독립적이어야 함</p> <p>D - Durability</p></div> <p>출처 : 단국대학교 소프트웨어학과 이석균 교수님 - 데이터 베이스 기초, 고급 데이터 베이스 자료내용</p> <h2 id="무결성-제약-조건"><a href="#무결성-제약-조건" class="header-anchor">#</a> 무결성 제약 조건</h2> <h3 id="무결성-제약-조건이란"><a href="#무결성-제약-조건이란" class="header-anchor">#</a> 무결성 제약 조건이란?</h3> <p>데이터베이스 스키마에 대하여 지정되는 조건으로 데이터베이스에 저장되는 데이터들이 반드시 만족해야 할 조건을 의미한다.</p> <p>관계형 모델에서의 무결성 제약 조건</p> <p>👉 도메인 제약 조건 - Domain Constraint</p> <p>각 속성의 도메인을 지정하여 입력 오류 방지한다. SQL 은 다양한 타입을 제공하여 도메인 제약 조건을 지원한다.</p> <p>하지만 가령 학생들의 성적 같은 경우 A, B, C, D, F 의 알파벳으로만 표현된다고 가정하면 다른 문자들이 오는걸 막아야 한다. 이러한 경우 아래와 같은 경우 <strong>check 절</strong> 을 활용할 수 있다.</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> Course_Taken <span class="token punctuation">(</span>
    grade <span class="token keyword">CHAR</span> <span class="token keyword">CHECK</span> <span class="token punctuation">(</span>grade <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token string">'D'</span> <span class="token punctuation">,</span> <span class="token string">'F'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="키-제약-조건-key-constraint"><a href="#키-제약-조건-key-constraint" class="header-anchor">#</a> 키 제약 조건 - Key Constraint</h3> <p>키(key)는 릴레이션의 투플을 유일하게 식별할 수 있는 속성을 의미한다. 키는 다음과 같은 특징을 가진다.</p> <ul><li><p>유일성 (unqueness) 보장 : 릴레이션의 어떤 두 투플도 키를 구성하는 모든 속성에 대해 동일한 값을 가질 수 없다.</p></li> <li><p>최소 집합 (minmal set) 요건 : 키를 구성하는 속성의 어떤 부분집합도 투플의 유일성을 보장하지 못한다.</p> <ul><li>Ex) 학과DB에서 {학번, 이름} 과 {학번} 이 두가지 case 모두 투플들의 유일성을 보장할 수 있다. 하지만 {학번, 이름}의 경우 최소집합 요건을 만족시키지 않는다.</li></ul></li></ul> <h3 id="키의-종류-및-조건"><a href="#키의-종류-및-조건" class="header-anchor">#</a> 키의 종류 및 조건</h3> <p>Candidate Key 👉 단일 인스턴스를 유일하게 식별해주는 하나의 필드 또는 집합이다. 각 테이블은 적어도 하나의 후보키를 가져야만 한다.</p> <p>Super Key 👉 릴레이션에서 유일성을 보장하는 속성은 모두 superkey 가 된다. 위에서 다루었던 { 학번 }, { 학번, 이름 } 모두 superkey 가 된다. 이때 주의할점은 모든 super key 가 primary key 가 되는건 아니다.</p> <p>Primary Key 👉 후보키 중 하나의 키가 기본키가 되고 나머지는 후보키가 된다. Primary Key 절을 사용한다.</p> <p>Alternate Key 👉 후보키 중 기본키를 제외한 키, Unique 절 사용</p> <p><strong>후보키 (기본키)의 요소</strong></p> <ul><li>유일한 값을 포함한다.</li> <li>널 값을 포함할 수 없다.</li> <li>보안이나 비밀을 깨틀리지 않는다. (주민등록번호 같은 값들은 후보 키로 부적합)</li> <li>다중필드가 아니다.</li> <li>아주 드물고 극단적인 경우에만 수정될 수 있다.</li></ul> <h3 id="개체-무결성-제약조건-entity-integrity-constraint"><a href="#개체-무결성-제약조건-entity-integrity-constraint" class="header-anchor">#</a> 개체 무결성 제약조건 - Entity Integrity Constraint</h3> <p>개체 무결성 제약조건은 <strong>기본키에는 NULL 이 올 수 없음</strong>을 의미한다.</p> <p>DB에서의 <code>NULL</code> 의 개념</p> <ol><li><p>Unknown 의 의미</p> <ul><li>아직 기록이 되지 않거나, 값이 존재하나 누락된 경우, 실제 존재하는지 여부를 모르는 경우 알려지지 않음의 의미로 NULL이 쓰인다.</li></ul></li> <li><p>Inapplicable 의 의미</p> <ul><li>데이터 개체가 속성을 가질 수 없는 경우에 해당한다.</li> <li>예를들어 대학교 수업 강사 또는 교수의 데이터에서 강사들의 경우 연구실이 없고 교수만 연구실이 있다고 가정하면 강사들은 연구실 필드에 널 값이 올 수 있다.</li></ul></li></ol> <p>기본 키에는 NOT NULL 절 사용</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> Student <span class="token punctuation">(</span>
    id <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token comment">/* 개체 무결성 제약조건 */</span>
    ssn <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    name <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    major <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    gpa <span class="token keyword">FLOAT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
    <span class="token keyword">UNIQUE</span><span class="token punctuation">(</span>ssn<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">/* 키 제약 조건, 후보키 제약 */</span>
    <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 키 제약 조건, 기본키 제약 */</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="외래키-제약조건-referential-integrity-constraint"><a href="#외래키-제약조건-referential-integrity-constraint" class="header-anchor">#</a> 외래키 제약조건 - Referential Integrity Constraint</h3> <p>외래키는 <strong>다른 테이블의 기본키 값</strong>을 가지는 속성을 의미한다.</p> <ul><li>자식 (child) 테이블 : 외래키를 포함하는 테이블</li> <li>부모 (parent) 테이블 : 외래키가 가리키는 기본키를 갖는 테이블</li></ul> <p>외래키 제약조건은 NULL 또는 외래키의 값과 같은 값을 기본키 값으로 갖는 투플이 부모 테이블에 존재해야 한다.</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> Student <span class="token punctuation">(</span>
    id <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    major <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">UNIQUE</span> <span class="token punctuation">(</span>ssn<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>major<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> Department<span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>위의 예제의 경우 major (전공)은 department 테이블의 기본키인 id 값을 참조하게 되는 경우이다.</p> <p>⭐️ <strong>외래키 제약 조건 위반 사례</strong></p> <ul><li>Department 에 없는 전공 값의 투플을 Student 에 입력할 때 👉 자식 테이블에서 위반 🙅🏻‍♂️</li> <li>Student 에서 참조하는 전공의 투플을 Department 에서 삭제할 때 👉 부모 테이블에서 위반 🙅🏻‍♂️</li> <li>Student 에서 참조하는 전공의 값을 Department 에서 변경 할 떄 👉 부모 테이블에서 위반 🙅🏻‍♂️</li></ul> <p>2,3 번의 경우 부모 테이블에서 외래키 제약 조건을 위반하는 경우 <strong>DBMS 정책이</strong> 있다.</p> <ol><li>No Action : Parent 의 갱신 작업을 허용하지 않는다 (디폴트)</li> <li>Set Null : Parent 의 갱신에 대해 Child의 외래키를 NULL로 설정</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> Student <span class="token punctuation">(</span>
    <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>major<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> Department<span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">SET</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="3"><li><p>Set Default : Set NULL 과 유사함 NULL 대신 Default 값을 설정</p></li> <li><p><strong>Cascade</strong> : DELETE 연산의 경우 부모 테이블로부터 튜플들이 삭제될 때 자식 테이블 중 이 튜플을 참조하는 값들을 <strong>연쇠적으로 삭제</strong>한다. UPDATE 연산의 경우 자식 테이블의 외래키의 속성 값을 부모 테이블의 수정된 기본키의 속성 값으로 <strong>연쇄적으로 수정</strong>한다.</p></li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>major<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> Department<span class="token punctuation">(</span>id<span class="token punctuation">)</span>
    <span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">SET</span> <span class="token boolean">NULL</span>ㅈ
    <span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">CASCADE</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="정규화"><a href="#정규화" class="header-anchor">#</a> 정규화</h2> <p>관계형 데이터베이스의 설계과정에서 <strong>redundancy를 최소화</strong> 하고 데이터를 구조화 하는걸 정규화 (normalization) 이라고 한다.</p> <h3 id="정규화를-해야하는-이유-⁉️"><a href="#정규화를-해야하는-이유-⁉️" class="header-anchor">#</a> 정규화를 해야하는 이유 ⁉️</h3> <p>정규화를 전혀 고려하지 않은 데이터베이스의 경우 불필요한 데이터 중복이 발생 (redundancy) 할 수 있고 데이터 중복으로 인해 공간도 낭비될 뿐만아니라 <code>Anomaly</code> 가 발생할 수 있다.</p> <p>👉 Insertion Anomaly</p> <table><thead><tr><th style="text-align:center;">id</th> <th style="text-align:center;">이름</th> <th style="text-align:center;">강의명</th> <th style="text-align:center;">담당 교수</th></tr></thead> <tbody><tr><td style="text-align:center;">1</td> <td style="text-align:center;">신정웅</td> <td style="text-align:center;">데이터베이스</td> <td style="text-align:center;">이석균 교수님</td></tr> <tr><td style="text-align:center;">2</td> <td style="text-align:center;">정익효</td> <td style="text-align:center;">데이터베이스</td> <td style="text-align:center;">이석균 교수님</td></tr> <tr><td style="text-align:center;">3</td> <td style="text-align:center;">지영본</td> <td style="text-align:center;">데이터베이스</td> <td style="text-align:center;">이석균 교수님</td></tr></tbody></table> <p>위와 같은 데이터가 있다고 가정해보자. 이때 새로운 학생이 데이터베이스 수업에 추가되면 또 같은 값에 대한 Insertion 이 이루어 진다. 아직까진 그렇게 큰 문제가 아닐 수 있다.</p> <p>👉 Deletion Anomaly</p> <table><thead><tr><th style="text-align:center;">id</th> <th style="text-align:center;">이름</th> <th style="text-align:center;">강의명</th> <th style="text-align:center;">담당 교수</th></tr></thead> <tbody><tr><td style="text-align:center;">1</td> <td style="text-align:center;">신정웅</td> <td style="text-align:center;">데이터베이스</td> <td style="text-align:center;">이석균 교수님</td></tr></tbody></table> <p>위의 데이터에서 지영본, 정익효 학생의 수강 내역이 삭제되었다고 가정해보자. 이때 마지막 남은 신정웅 학생의 수강내역 마저 삭제가 되면 데이터베이스 강의명과 담당교수에 대한 데이터가 아예 없어진다. 즉, 없는 수업이 되어 버린다.</p> <p>데이터베이스에서 수강내역만을 삭제했을 뿐인데 강의에 대한 데이터까지 전부 삭제되는 불상사가 발생한 것이다.</p> <p>👉 Updation Anomaly</p> <table><thead><tr><th style="text-align:center;">id</th> <th style="text-align:center;">이름</th> <th style="text-align:center;">강의명</th> <th style="text-align:center;">담당 교수</th></tr></thead> <tbody><tr><td style="text-align:center;">1</td> <td style="text-align:center;">신정웅</td> <td style="text-align:center;">데이터베이스</td> <td style="text-align:center;"><s>이석균</s> 우진운 교수님</td></tr> <tr><td style="text-align:center;">2</td> <td style="text-align:center;">정익효</td> <td style="text-align:center;">데이터베이스</td> <td style="text-align:center;">이석균 교수님</td></tr> <tr><td style="text-align:center;">3</td> <td style="text-align:center;">지영본</td> <td style="text-align:center;">데이터베이스</td> <td style="text-align:center;"><s>이석균</s> 우진운 교수님</td></tr></tbody></table> <p>만약 위와 같이 데이터베이스 수업 담당 교수가 이석균 교수님에서 우진운 교수님으로 바뀌었다고 가정해보자.</p> <p>그렇다면 중복된 이석균 교수님에 대한 모든 데이터가 다 update 되어야 한다. 만약 위와 같이 1개라도 제대로 update가 이루어지지 않으면 담당 교수는 이석균 교수님인지 우진운 교수님인지 혼돈에 휩싸일 수 있다.</p> <p>데이터베이스 정규화는 단계별로 이루어진다. 하나씩 알아보자.</p> <h3 id="_1nf-first-normal-form"><a href="#_1nf-first-normal-form" class="header-anchor">#</a> 1NF - First Normal Form</h3> <p>1NF 혹은 First Normal Form 은 가장 기초적인 정규화 단계이다. 1NF 조차 지켜지지 않은 데이터베이스는 설계가 아주 잘못되었다고 볼 수 있다.</p> <p>따라서 데이터베이스에서 모든 테이블은 <strong>최소한의 조건</strong>으로 1NF는 항상 만족해야한다.</p> <p>👉 Rule 1</p> <p>모든 필드, 행은 <strong>atomic values</strong> 를 가져야 한다.</p> <table><thead><tr><th style="text-align:center;">Col 1</th> <th style="text-align:center;">Col 2</th> <th style="text-align:center;">Col 3</th></tr></thead> <tbody><tr><td style="text-align:center;">A</td> <td style="text-align:center;"><strong>X, Y</strong></td> <td style="text-align:center;">Z</td></tr> <tr><td style="text-align:center;">B</td> <td style="text-align:center;">W</td> <td style="text-align:center;">F</td></tr> <tr><td style="text-align:center;">C</td> <td style="text-align:center;">D</td> <td style="text-align:center;">F</td></tr></tbody></table> <p>위의 경우 X, Y 값을 동시에 가지기 때문에 위반 사례가 된다.</p> <p>👉 Rule 2</p> <p>모든 필드의 값들은 같은 타입을 가져야 한다.</p> <table><thead><tr><th style="text-align:center;">생일</th> <th style="text-align:center;">이름</th> <th style="text-align:center;">성별</th></tr></thead> <tbody><tr><td style="text-align:center;">96-11-27</td> <td style="text-align:center;">지영본</td> <td style="text-align:center;">여</td></tr> <tr><td style="text-align:center;">08-07-09</td> <td style="text-align:center;">정익효</td> <td style="text-align:center;">남</td></tr> <tr><td style="text-align:center;"><strong>R</strong></td> <td style="text-align:center;">이현수</td> <td style="text-align:center;">남</td></tr></tbody></table> <p>👉 Rule 3</p> <p>모든 행들은 유니크한 Name (필드 명) 을 가져야 한다.</p> <table><thead><tr><th style="text-align:center;">생일</th> <th style="text-align:center;">이름 ❌ 성 ⭕️</th> <th style="text-align:center;">이름</th></tr></thead> <tbody><tr><td style="text-align:center;">96-11-27</td> <td style="text-align:center;">지</td> <td style="text-align:center;">영본</td></tr> <tr><td style="text-align:center;">08-07-09</td> <td style="text-align:center;">정</td> <td style="text-align:center;">익효</td></tr> <tr><td style="text-align:center;">95-03-11</td> <td style="text-align:center;">이</td> <td style="text-align:center;">현수</td></tr></tbody></table> <p>같은 한 테이블에 필드명을 가지게 되면 많은 혼란을 초래할 수 있다.</p> <h3 id="_2nf-second-normal-form"><a href="#_2nf-second-normal-form" class="header-anchor">#</a> 2NF - Second Normal Form</h3> <p>2NF 이해하기 위해서는 <code>partial dependency</code> 에 대한 개념이 필요하다.</p> <p>아래와 같은 테이블이 있닥고 가정해보자.</p> <table><thead><tr><th style="text-align:center;">학번</th> <th style="text-align:center;">이름</th> <th style="text-align:center;">학과</th></tr></thead> <tbody><tr><td style="text-align:center;">1324981</td> <td style="text-align:center;">지영본</td> <td style="text-align:center;">도예과</td></tr> <tr><td style="text-align:center;">4358941</td> <td style="text-align:center;">정익효</td> <td style="text-align:center;">도예과</td></tr> <tr><td style="text-align:center;">1342818</td> <td style="text-align:center;">이현수</td> <td style="text-align:center;">성악과</td></tr></tbody></table> <p>이때 학번의 필드는 데이터를 Table에서 fetch 할때 해당 튜플을 유일하게 식별 가능하다.</p> <p>예를들어 학번이 1324981인 학생의 학과를 조회할 때 학번으로 학생의 학과를 알아낼 수 있다.</p> <p>따라서 다른 필드들 (이름, 학과) 이러한 필드 (학번, primary key)에 종속성을 가지게 된다. 이를 <strong>dependency</strong> 혹은 <strong>functional dependency</strong> 라고 말할 수 있다. 그렇다면 partial dependency 는 무엇일까?</p> <p>Pratial Dependency 는 primary key 가 <strong>composite key, 즉, 두개 이상의 필드가 키로 쓰일때</strong> 발생할 수 있다.</p> <p>다음과 같은 학생의 수강 내역을 저장하는 테이블이 있다고 가정하자.</p> <table><thead><tr><th style="text-align:center;">학번</th> <th style="text-align:center;">이름</th> <th style="text-align:center;">강의명</th> <th style="text-align:center;">성적</th> <th style="text-align:center;">담당 교수</th></tr></thead> <tbody><tr><td style="text-align:center;">1324981</td> <td style="text-align:center;">지영본</td> <td style="text-align:center;">데이터베이스</td> <td style="text-align:center;">A+</td> <td style="text-align:center;">ㅇㅇㅇ 교수님</td></tr> <tr><td style="text-align:center;">4358941</td> <td style="text-align:center;">정익효</td> <td style="text-align:center;">알고리즘</td> <td style="text-align:center;">B+</td> <td style="text-align:center;">XXX 교수님</td></tr> <tr><td style="text-align:center;">1342818</td> <td style="text-align:center;">이현수</td> <td style="text-align:center;">데이터베이스</td> <td style="text-align:center;">F</td> <td style="text-align:center;">ㅇㅇㅇ 교수님</td></tr></tbody></table> <p>이때 학번 + 강의명이 primary key 로 사용될 수 있다. 그렇다면 종속성을 따져보자.</p> <div class="language- extra-class"><pre><code>{학번, 강의명} 👉 성적
학번 👉 이름
강의명 👉 담당 교수
</code></pre></div><blockquote><p>따라서 담당교수 필드, 이름 필드 등은 primary key 에 대하여 부분적인 종속성, partial dependency 를 가지고 이는 2NF에 위반된다.</p></blockquote> <p>2NF는 이러한 partial dependency 를 없애는걸 의미한다. {학번, 이름}에 대한 테이블, {학번, 강의명, 성적} 에 대한 테이블, {강의명, 담당교수} 에 대한 테이블로 분리해주어 모든 기본키가 아닌 필드는 기본키에 대해서 <code>full functional dependency</code> 를 가지도록 설계해야 한다.</p> <h3 id="_3nf-third-normal-form"><a href="#_3nf-third-normal-form" class="header-anchor">#</a> 3NF - Third Normal Form</h3> <p>3rd Normal Form 은 <code>Transitive Dependency</code> 을 이해해야 한다. 이는 2NF 에서 다루었던 Partial Dependency 와는 다른 개념이다.</p> <p>3NF 은 2NF이고, 키가 아닌 모든 속성들은 기본 키에 이행적 종속이 되지 않아야 한다.</p> <p>다음과 같은 필드들의 테이블이 있다고 가정하자.</p> <table><thead><tr><th style="text-align:center;">과목 번호</th> <th style="text-align:center;">과목명</th> <th style="text-align:center;">과목 설명</th> <th style="text-align:center;">교수 ID</th> <th style="text-align:center;">교수 이름</th> <th style="text-align:center;">연구실</th></tr></thead> <tbody><tr><td style="text-align:center;">CF5</td> <td style="text-align:center;">데이터베이스</td> <td style="text-align:center;">데이터베이스 기초 수업</td> <td style="text-align:center;">P-442</td> <td style="text-align:center;">이석균 교수님</td> <td style="text-align:center;">S-401</td></tr></tbody></table> <p>이때 종속성을 따져보자.</p> <p>과목 번호 (기본 키) 에 과목명, 과목 설명, 교수 번호, 교수 이름, 연구실이 종속성을 가진다.</p> <p>또한, 교수 번호 (키가 아닌 속성) 에 교수 이름, 연구실이 종속을 가진다.</p> <p>즉, 연구실은 <strong>과목 번호 👉 교수 ID 👉 연구실</strong></p> <blockquote><p>A -&gt; B 와 B -&gt; C 이기 때문에 A -&gt; C 라는 관계가 성립한다. 따라서 이러한 <strong>이행적 종속</strong>성이 3NF 위반 사례에 해당된다.</p></blockquote> <p>이는 교수 TABLE 과 과목 TABLE 을 분리하여 해결할 수 있다.</p> <h3 id="bcnf-boyce-codd-normal-form"><a href="#bcnf-boyce-codd-normal-form" class="header-anchor">#</a> BCNF - Boyce-Codd Normal Form</h3> <p>BCNF를 다루기전에 이전 정규화 단계에 대해 빠르게 복습해보자.</p> <ul><li><p>2NF - Partial Dependency</p> <ul><li>A 가 prime attribute, B가 non-prime attribute 일때,</li> <li>AXY {후보키} 에 대하여 B 가 A 속성에 대하여 부분적으로 종속성을 가지면 위반</li></ul></li> <li><p>3NF - Transitive Dependency</p> <ul><li>A 가 non-prime attr, B가 non-prime attr 일때,</li> <li>A 👉 B 가 종속성을 가지면 이행적 종속성을 가지게 되어 위반</li></ul> <p>의 내용을 다시 한번 이해하고 BCNF 로 들어가자</p></li></ul> <p>BCNF 는 다음 두가지 조건을 만족해야 한다.</p> <ol><li>3NF 를 만족해야 한다.</li> <li>모든 필드에 대하여 A 👉B 의 관계에서 <strong>A 는 반드시 super key</strong> 이어야 한다.</li></ol> <p>이에 따라 규칙 2를 위반하는 경우</p> <blockquote><p>A 👉B 의 관계에서 A 가 non-prime 이지만 B 가 prime attribute 일때 BCNF 위반 사례가 된다.</p></blockquote> <p>아래와 같은 학생들의 수강 과목에 대한 테이블이 있다 가정해보자.</p> <table><thead><tr><th style="text-align:center;">학번</th> <th style="text-align:center;">과목</th> <th style="text-align:center;">담당 교수</th></tr></thead> <tbody><tr><td style="text-align:center;">32162174</td> <td style="text-align:center;">데이터베이스</td> <td style="text-align:center;">이석균 교수님</td></tr> <tr><td style="text-align:center;">32158320</td> <td style="text-align:center;">글로벌 중국어</td> <td style="text-align:center;">쯔위 교수님</td></tr></tbody></table> <p>위의 경우 종속성을 따져보자.</p> <ol><li>{ 학번, 과목 } 👉 담당 교수</li> <li>담당 교수 👉 과목</li></ol> <p>두 가지 종속성에 대하여 두 종속성 모두 partial dependency, transitive dependency 가 없다.</p> <p>하지만 BCNF 를 고려 해보면 <strong>담당교수 (non - prime) 👉  과목 (prime)</strong> 인 상황이다.</p> <p>따라서 과목 속성이 super key가 아닌 속성에 의해 종속성을 가지고 있고 이는 BCNF 위반에 해당된다.</p> <table><thead><tr><th style="text-align:center;">학번</th> <th style="text-align:center;">과목ID</th></tr></thead> <tbody></tbody></table> <table><thead><tr><th style="text-align:center;">과목ID</th> <th style="text-align:center;">담당 교수</th> <th style="text-align:center;">과목명</th></tr></thead> <tbody></tbody></table> <p>다음과 같이 2개의 테이블로 분리하고 과목 ID 속성을 참조하게 하여 BCNF를 만족시킬 수 있다.</p> <h3 id="_4nf-fourth-normal-form"><a href="#_4nf-fourth-normal-form" class="header-anchor">#</a> 4NF - Fourth Normal Form</h3> <p>4NF 는 <code>Multi-Valued Dependency</code> 에 대한 내용을 다룬다.</p> <p>Multi-Valued Dependency 는 다음 3가지 조건을 만족할때 해당 된다.</p> <ol><li>A 👉B 종속 관계에서 하나의 A 에 대하여 하나 이상의 B가 존재한다.</li> <li>테이블은 3개 이상의 행으로 이루어져 있다.</li> <li>3개의 속성을 A, B, C 라 가정했을 때, B와 C는 independent하다(관계가 없다).</li></ol> <p>먼저 Single-valued Dependency 와 Multi-valued Dependency 에 대해 알아보자.</p> <ul><li><p>Single-valued (One-to-One) Dependency</p> <ul><li>x -&gt; y 인 관계</li> <li>예) 한명의 사람 (x) 은 하나의 주민등록번호 (y)를 가진다.</li></ul></li> <li><p>Multi-valued (One-to-Many) Dependency</p> <ul><li>x -&gt;&gt; y 인 관계</li> <li>예) 한 학생(x)이 한 학기 동안 여러과목(y)을 수강할 수 있다.</li></ul></li></ul> <h3 id="함수적-종속에-의한-바람직한-분할-⭐️"><a href="#함수적-종속에-의한-바람직한-분할-⭐️" class="header-anchor">#</a> 함수적 종속에 의한 바람직한 분할 ⭐️</h3> <ol><li><p>무 손실 조인 분할 (lossless - join)</p> <ul><li>분할된 테이블을 다시 조인 했을때, 원래의 테이블이 그대로 복원되어야 한다.</li></ul></li> <li><p>종속 유지 분할 (dependency preserving)</p> <ul><li>테이블을 분할한 결과로 생성된 테이블들을 원래 테이블이 가지고 있던 함수적 종속을 모두 가지도록 분할해야 한다.</li> <li>제 3정규형의 DB 스키마를 설계할 수 있다.</li></ul></li></ol> <p>출처 : <a href="https://ko.wikipedia.org/wiki/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4_%EC%A0%95%EA%B7%9C%ED%99%94" target="_blank" rel="noopener noreferrer">위키 피디아<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://www.youtube.com/watch?v=mUtAPbb1ECM" target="_blank" rel="noopener noreferrer">YouTube : Studytonight<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/JeongShin_Blog/TIL/study/Rails.html" class="prev">
        Rails Study Notes
      </a></span> <span class="next"><a href="/JeongShin_Blog/algorithms/Problems/">
        안녕하세요 !
      </a>
      →
    </span></p></div>  <div><div id="comment"></div></div></main> <footer class="siteFooter">
  COPYRIGHT©2020 ALL RIGHT JeongShin
  <br>sjeong1127@gmail.com . +82-10-2169-2142 .
  <br> <a href="https://www.instagram.com/jeongshin96/" target="_blank">Instagram</a> <a href="https://github.com/JeongShin" target="_blank">GitHub</a></footer></div><div class="global-ui"></div></div>
    <script src="/JeongShin_Blog/assets/js/app.b665e261.js" defer></script><script src="/JeongShin_Blog/assets/js/2.b04f9bcd.js" defer></script><script src="/JeongShin_Blog/assets/js/16.9cfdb0f1.js" defer></script>
  </body>
</html>
